# =============================================================================
# DealPulse Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your actual values
# Run: npm run generate:secrets (or scripts/generate-secrets.sh) to create new secrets
#
# IMPORTANT: This project uses Traefik for routing. See compose.yaml for details.
# Required /etc/hosts entries:
#   127.0.0.1 dealpulse.local
#   127.0.0.1 api.dealpulse.local
#   127.0.0.1 studio.dealpulse.local
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
POSTGRES_PASSWORD=your-secure-postgres-password-here

# -----------------------------------------------------------------------------
# JWT & Authentication
# -----------------------------------------------------------------------------
# JWT secret used to sign tokens - MUST match ANON_KEY and SERVICE_ROLE_KEY
# Generate with: openssl rand -hex 64
JWT_SECRET=your-jwt-secret-here

# Anonymous key - used for client-side requests (safe to expose)
# Generate with scripts/generate-secrets.sh
ANON_KEY=your-anon-key-here

# Service role key - NEVER expose to clients (backend only)
# Generate with scripts/generate-secrets.sh
SERVICE_ROLE_KEY=your-service-role-key-here

# -----------------------------------------------------------------------------
# Supabase Public Configuration (Safe for Client-Side)
# -----------------------------------------------------------------------------
# Browser-facing URL: Routes through Traefik to Kong
NEXT_PUBLIC_SUPABASE_URL=http://api.dealpulse.local
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# -----------------------------------------------------------------------------
# Internal Service Keys (Backend Only - NEVER expose)
# -----------------------------------------------------------------------------
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Internal URL for server-side/Docker communication (bypasses Traefik)
# Use this in workers and server actions that run inside Docker
SUPABASE_INTERNAL_URL=http://kong:8000

# -----------------------------------------------------------------------------
# Token Encryption
# -----------------------------------------------------------------------------
# Used to encrypt OAuth tokens before storing in database (AES-256)
# Generate with: openssl rand -hex 32
TOKEN_ENCRYPTION_KEY=your-token-encryption-key-here

# -----------------------------------------------------------------------------
# Application URLs
# -----------------------------------------------------------------------------
# Browser-facing URL: Routes through Traefik to Next.js dev server
NEXT_PUBLIC_APP_URL=http://dealpulse.local

# -----------------------------------------------------------------------------
# Google OAuth Configuration
# -----------------------------------------------------------------------------
# Get credentials from: https://console.cloud.google.com/apis/credentials
# 1. Create OAuth 2.0 Client ID
# 2. Add authorized redirect URI: http://api.dealpulse.local/auth/v1/callback
#    (This routes through Traefik to GoTrue)
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-client-secret

# -----------------------------------------------------------------------------
# Redis Configuration (for background workers)
# -----------------------------------------------------------------------------
# Inside Docker, use service name (not localhost)
REDIS_HOST=redis
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# Node Environment
# -----------------------------------------------------------------------------
NODE_ENV=development
